<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QADMS Token Import Console</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="layout">
      <header class="hero">
        <p class="kicker">QADMS</p>
        <h1>Token Import Console</h1>
        <p class="subhead">
          Import Figma/Tokens Studio exports into the canonical token model and inspect provenance metadata.
        </p>
      </header>

      <section class="panel">
        <h2>Import Request</h2>
        <div class="grid two">
          <label>
            Source ID
            <input id="sourceId" type="text" value="source-theme" />
          </label>
          <label>
            API Base URL
            <input id="apiBase" type="url" value="http://127.0.0.1:8000" />
          </label>
        </div>

        <label class="inline">
          <input id="useMockFallback" type="checkbox" checked />
          Use local mock importer if API is unavailable
        </label>

        <label>
          Token JSON file (optional)
          <input id="fileInput" type="file" accept=".json,application/json" />
        </label>

        <label>
          JSON payload (used when no file is selected)
          <textarea id="payload" rows="12"></textarea>
        </label>

        <div class="actions">
          <button id="importBtn" type="button">Import Tokens</button>
          <button id="resetBtn" type="button" class="ghost">Load Default Payload</button>
        </div>

        <p id="status" class="status">Ready.</p>
      </section>

      <section class="panel" id="provenancePanel" hidden>
        <h2>Provenance</h2>
        <dl class="provenance">
          <div>
            <dt>Source ID</dt>
            <dd id="provSourceId">-</dd>
          </div>
          <div>
            <dt>Version ID</dt>
            <dd id="provVersionId">-</dd>
          </div>
          <div>
            <dt>Imported At</dt>
            <dd id="provImportedAt">-</dd>
          </div>
          <div>
            <dt>Token Source</dt>
            <dd id="provTokenSource">-</dd>
          </div>
        </dl>
      </section>

      <section class="panel" id="validationPanel" hidden>
        <h2>Validation</h2>
        <div class="grid two">
          <article>
            <h3>Errors</h3>
            <ul id="errorList"></ul>
          </article>
          <article>
            <h3>Warnings</h3>
            <ul id="warningList"></ul>
          </article>
        </div>
      </section>

      <section class="panel" id="tokensPanel" hidden>
        <h2>Token Summary</h2>
        <div id="counts" class="chips"></div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Path</th>
                <th>Type</th>
                <th>Value</th>
              </tr>
            </thead>
            <tbody id="tokenRows"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" id="violationsPanel" hidden>
        <h2>Violations</h2>
        <div id="violationSummary" class="chips"></div>

        <div class="grid filters">
          <label>
            Severity
            <select id="filterSeverity">
              <option value="all">All</option>
            </select>
          </label>
          <label>
            Category
            <select id="filterCategory">
              <option value="all">All</option>
            </select>
          </label>
          <label>
            Rule
            <select id="filterRule">
              <option value="all">All</option>
            </select>
          </label>
          <label>
            Search
            <input id="filterSearch" type="text" placeholder="title, code, token path..." />
          </label>
        </div>

        <p id="violationMeta" class="status"></p>

        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th>Severity</th>
                <th>Category</th>
                <th>Rule</th>
                <th>Code</th>
                <th>Title</th>
                <th>Evidence</th>
              </tr>
            </thead>
            <tbody id="violationRows"></tbody>
          </table>
        </div>
      </section>

      <section class="panel" id="violationDetailPanel" hidden>
        <h2>Violation Detail</h2>
        <p id="violationDetailTitle" class="detail-title">Select a violation to see details.</p>
        <dl class="detail-grid">
          <div>
            <dt>Rule</dt>
            <dd id="detailRule">-</dd>
          </div>
          <div>
            <dt>Code</dt>
            <dd id="detailCode">-</dd>
          </div>
          <div>
            <dt>Severity</dt>
            <dd id="detailSeverity">-</dd>
          </div>
          <div>
            <dt>Category</dt>
            <dd id="detailCategory">-</dd>
          </div>
        </dl>
        <h3>Evidence</h3>
        <pre id="detailEvidence" class="detail-pre">-</pre>
        <h3>Fix Hint</h3>
        <pre id="detailFix" class="detail-pre">-</pre>
      </section>
    </main>

    <script type="module" src="./app.js"></script>
  </body>
</html>
